\doxysection{Outdoor\+\_\+\+Unit/outdoorunit/outdoorunit.ino File Reference}
\hypertarget{outdoorunit_8ino}{}\label{outdoorunit_8ino}\index{Outdoor\_Unit/outdoorunit/outdoorunit.ino@{Outdoor\_Unit/outdoorunit/outdoorunit.ino}}
{\ttfamily \#include "{}DHT.\+h"{}}\newline
{\ttfamily \#include "{}Wi\+Fi.\+h"{}}\newline
{\ttfamily \#include "{}HTTPClient.\+h"{}}\newline
{\ttfamily \#include "{}Arduino\+Json.\+h"{}}\newline
{\ttfamily \#include "{}Thing\+Speak.\+h"{}}\newline
{\ttfamily \#include "{}secrets.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{outdoorunit_8ino_a1481e2e73ead95154830a58de486cb2e}{DHT11\+Pin}}~5
\begin{DoxyCompactList}\small\item\em Pin to which the DHT11 sensor data line is connected. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{outdoorunit_8ino_a4a0a4aa5db390e405fce9272877d4704}{forecast\+Weather\+URL}}~"{}http\+://api.\+openweathermap.\+org/\mbox{\hyperlink{_indoor___e_s_p_8ino_a173b91873a3fc4f50a95416a6204d963}{data}}/2.\+5/forecast?lat=5.\+671401156455272\&lon=101.\+41105533517317\&units=metric\&appid=APIKEYHERE"{}
\begin{DoxyCompactList}\small\item\em URL for obtaining the 5-\/day/3-\/hour weather forecast from Open\+Weather\+Map. Replace "{}\+APIKEYHERE"{} with your actual API key. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
DHT \mbox{\hyperlink{outdoorunit_8ino_ae020b4c28bfae6d1b1550584075c7213}{dht11}} (\mbox{\hyperlink{outdoorunit_8ino_a1481e2e73ead95154830a58de486cb2e}{DHT11\+Pin}}, DHT11)
\begin{DoxyCompactList}\small\item\em Instance of DHT sensor, configured for DHT11 type. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{outdoorunit_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Arduino setup function. Initializes serial communication, DHT sensor, and connects to Wi\+Fi. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{outdoorunit_8ino_acb4dc83e53bfebae6d753102470d94cc}{fetch\+Rain\+Status}} ()
\begin{DoxyCompactList}\small\item\em Fetches and interprets the weather forecast to determine the rain status. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{outdoorunit_8ino_a66e3fe8bc97521ff09c211001a38a488}{collect\+Real\+Weather}} ()
\begin{DoxyCompactList}\small\item\em Reads temperature and humidity values from the DHT11 sensor and updates global variables. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{outdoorunit_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Arduino main loop function. Reads sensor data, retrieves forecast, sends data to Thing\+Speak, and waits 10 minutes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{outdoorunit_8ino_a3cc119cb1a4beab046568bd21fcac3e5}{temp}} = 0
\begin{DoxyCompactList}\small\item\em Holds the most recent temperature reading from the DHT11 sensor (in Â°C). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{outdoorunit_8ino_a3cb62182097ceb535c2f31919c98a0b6}{humidity}} = 0
\begin{DoxyCompactList}\small\item\em Holds the most recent humidity reading from the DHT11 sensor (\%). \end{DoxyCompactList}\item 
Wi\+Fi\+Client \mbox{\hyperlink{outdoorunit_8ino_a323dfc205549b3c13f0a25c1b670708a}{client}}
\begin{DoxyCompactList}\small\item\em Wi\+Fi client object for making HTTP requests and connecting to Thing\+Speak. \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{outdoorunit_8ino_a3fe2d87e95035781883990bf38554c9f}{APIKey}} = \mbox{\hyperlink{secrets_8h_a075c854f50f8c824da61dc0a9207374a}{Thing\+Speak\+Write\+Key}}
\begin{DoxyCompactList}\small\item\em Thing\+Speak channel write API key. \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{outdoorunit_8ino_ab68b888c3d204a4403af6d1b22f6d07c}{server}} = "{}api.\+thingspeak.\+com"{}
\begin{DoxyCompactList}\small\item\em Hostname for the Thing\+Speak API. \end{DoxyCompactList}\item 
unsigned long \mbox{\hyperlink{outdoorunit_8ino_ac45cf487b7a438e2176288955a338f25}{channel\+ID}} = \mbox{\hyperlink{secrets_8h_a9245b4c2f5b48265964acfdf5f7c54f9}{Thing\+Speak\+Channel\+ID}}
\begin{DoxyCompactList}\small\item\em The unique channel ID for the Thing\+Speak channel. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{outdoorunit_8ino_a58dd369d52256fa12a68256e014a210b}{rain\+Status}} = 0
\begin{DoxyCompactList}\small\item\em Stores the computed rain status based on the forecast data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{outdoorunit_8ino_a1481e2e73ead95154830a58de486cb2e}\index{outdoorunit.ino@{outdoorunit.ino}!DHT11Pin@{DHT11Pin}}
\index{DHT11Pin@{DHT11Pin}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{DHT11Pin}{DHT11Pin}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a1481e2e73ead95154830a58de486cb2e} 
\#define DHT11\+Pin~5}



Pin to which the DHT11 sensor data line is connected. 

\Hypertarget{outdoorunit_8ino_a4a0a4aa5db390e405fce9272877d4704}\index{outdoorunit.ino@{outdoorunit.ino}!forecastWeatherURL@{forecastWeatherURL}}
\index{forecastWeatherURL@{forecastWeatherURL}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{forecastWeatherURL}{forecastWeatherURL}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a4a0a4aa5db390e405fce9272877d4704} 
\#define forecast\+Weather\+URL~"{}http\+://api.\+openweathermap.\+org/\mbox{\hyperlink{_indoor___e_s_p_8ino_a173b91873a3fc4f50a95416a6204d963}{data}}/2.\+5/forecast?lat=5.\+671401156455272\&lon=101.\+41105533517317\&units=metric\&appid=APIKEYHERE"{}}



URL for obtaining the 5-\/day/3-\/hour weather forecast from Open\+Weather\+Map. Replace "{}\+APIKEYHERE"{} with your actual API key. 



\doxysubsection{Function Documentation}
\Hypertarget{outdoorunit_8ino_a66e3fe8bc97521ff09c211001a38a488}\index{outdoorunit.ino@{outdoorunit.ino}!collectRealWeather@{collectRealWeather}}
\index{collectRealWeather@{collectRealWeather}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{collectRealWeather()}{collectRealWeather()}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a66e3fe8bc97521ff09c211001a38a488} 
void collect\+Real\+Weather (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Reads temperature and humidity values from the DHT11 sensor and updates global variables. 

Temperature is stored in \doxylink{outdoorunit_8ino_a3cc119cb1a4beab046568bd21fcac3e5}{temp}, and humidity is stored in \doxylink{_indoor___e_s_p_8ino_a405f237eaa8a513a9682fbb6e44c4860}{humidity}. \Hypertarget{outdoorunit_8ino_ae020b4c28bfae6d1b1550584075c7213}\index{outdoorunit.ino@{outdoorunit.ino}!dht11@{dht11}}
\index{dht11@{dht11}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{dht11()}{dht11()}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_ae020b4c28bfae6d1b1550584075c7213} 
DHT dht11 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{outdoorunit_8ino_a1481e2e73ead95154830a58de486cb2e}{DHT11\+Pin}}}]{}{, }\item[{DHT11}]{}{}\end{DoxyParamCaption})}



Instance of DHT sensor, configured for DHT11 type. 

\Hypertarget{outdoorunit_8ino_acb4dc83e53bfebae6d753102470d94cc}\index{outdoorunit.ino@{outdoorunit.ino}!fetchRainStatus@{fetchRainStatus}}
\index{fetchRainStatus@{fetchRainStatus}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{fetchRainStatus()}{fetchRainStatus()}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_acb4dc83e53bfebae6d753102470d94cc} 
int8\+\_\+t fetch\+Rain\+Status (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Fetches and interprets the weather forecast to determine the rain status. 

Uses the Open\+Weather\+Map API forecast data for the next two intervals (3-\/hour blocks). Checks if "{}\+Rain"{} or "{}\+Drizzle"{} is mentioned in the first or second forecast blocks, and assigns a status code accordingly.

\begin{DoxyReturn}{Returns}
An integer representing the success or failure of the operation.
\begin{DoxyItemize}
\item 0,1,2,3\+: Valid status for expected rain (see \doxylink{outdoorunit_8ino_a58dd369d52256fa12a68256e014a210b}{rain\+Status}).
\item -\/1\+: Wi\+Fi not connected.
\item -\/2\+: HTTP GET request failed.
\item -\/3\+: JSON deserialization failed. 
\end{DoxyItemize}
\end{DoxyReturn}
\Hypertarget{outdoorunit_8ino_afe461d27b9c48d5921c00d521181f12f}\index{outdoorunit.ino@{outdoorunit.ino}!loop@{loop}}
\index{loop@{loop}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Arduino main loop function. Reads sensor data, retrieves forecast, sends data to Thing\+Speak, and waits 10 minutes. 

The cycle is\+:
\begin{DoxyItemize}
\item Delay 3 seconds to ensure the DHT sensor refreshes data.
\item Collect real-\/world weather data using \doxylink{outdoorunit_8ino_a66e3fe8bc97521ff09c211001a38a488}{collect\+Real\+Weather()}.
\item Retrieve rain status from \doxylink{outdoorunit_8ino_acb4dc83e53bfebae6d753102470d94cc}{fetch\+Rain\+Status()}.
\item Initialize Thing\+Speak, connect, update fields, and disconnect.
\item Delay 10 minutes before the next cycle. 
\end{DoxyItemize}\Hypertarget{outdoorunit_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{outdoorunit.ino@{outdoorunit.ino}!setup@{setup}}
\index{setup@{setup}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Arduino setup function. Initializes serial communication, DHT sensor, and connects to Wi\+Fi. 



\doxysubsection{Variable Documentation}
\Hypertarget{outdoorunit_8ino_a3fe2d87e95035781883990bf38554c9f}\index{outdoorunit.ino@{outdoorunit.ino}!APIKey@{APIKey}}
\index{APIKey@{APIKey}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{APIKey}{APIKey}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a3fe2d87e95035781883990bf38554c9f} 
const char\texorpdfstring{$\ast$}{*} APIKey = \mbox{\hyperlink{secrets_8h_a075c854f50f8c824da61dc0a9207374a}{Thing\+Speak\+Write\+Key}}}



Thing\+Speak channel write API key. 

\Hypertarget{outdoorunit_8ino_ac45cf487b7a438e2176288955a338f25}\index{outdoorunit.ino@{outdoorunit.ino}!channelID@{channelID}}
\index{channelID@{channelID}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{channelID}{channelID}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_ac45cf487b7a438e2176288955a338f25} 
unsigned long channel\+ID = \mbox{\hyperlink{secrets_8h_a9245b4c2f5b48265964acfdf5f7c54f9}{Thing\+Speak\+Channel\+ID}}}



The unique channel ID for the Thing\+Speak channel. 

\Hypertarget{outdoorunit_8ino_a323dfc205549b3c13f0a25c1b670708a}\index{outdoorunit.ino@{outdoorunit.ino}!client@{client}}
\index{client@{client}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{client}{client}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a323dfc205549b3c13f0a25c1b670708a} 
Wi\+Fi\+Client client}



Wi\+Fi client object for making HTTP requests and connecting to Thing\+Speak. 

\Hypertarget{outdoorunit_8ino_a3cb62182097ceb535c2f31919c98a0b6}\index{outdoorunit.ino@{outdoorunit.ino}!humidity@{humidity}}
\index{humidity@{humidity}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{humidity}{humidity}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a3cb62182097ceb535c2f31919c98a0b6} 
uint8\+\_\+t humidity = 0}



Holds the most recent humidity reading from the DHT11 sensor (\%). 

\Hypertarget{outdoorunit_8ino_a58dd369d52256fa12a68256e014a210b}\index{outdoorunit.ino@{outdoorunit.ino}!rainStatus@{rainStatus}}
\index{rainStatus@{rainStatus}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{rainStatus}{rainStatus}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a58dd369d52256fa12a68256e014a210b} 
int8\+\_\+t rain\+Status = 0}



Stores the computed rain status based on the forecast data. 

The mapping used is\+:
\begin{DoxyItemize}
\item 0\+: No rain expected in the next two intervals (6 hours).
\item 1\+: Rain expected in the first interval (first 3 hours).
\item 2\+: Rain expected in the second interval (next 3 hours).
\item 3\+: Rain expected in both intervals (first and second).
\item Negative values returned by \doxylink{outdoorunit_8ino_acb4dc83e53bfebae6d753102470d94cc}{fetch\+Rain\+Status()} indicate errors connecting or parsing data. 
\end{DoxyItemize}\Hypertarget{outdoorunit_8ino_ab68b888c3d204a4403af6d1b22f6d07c}\index{outdoorunit.ino@{outdoorunit.ino}!server@{server}}
\index{server@{server}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{server}{server}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_ab68b888c3d204a4403af6d1b22f6d07c} 
const char\texorpdfstring{$\ast$}{*} server = "{}api.\+thingspeak.\+com"{}}



Hostname for the Thing\+Speak API. 

\Hypertarget{outdoorunit_8ino_a3cc119cb1a4beab046568bd21fcac3e5}\index{outdoorunit.ino@{outdoorunit.ino}!temp@{temp}}
\index{temp@{temp}!outdoorunit.ino@{outdoorunit.ino}}
\doxysubsubsection{\texorpdfstring{temp}{temp}}
{\footnotesize\ttfamily \label{outdoorunit_8ino_a3cc119cb1a4beab046568bd21fcac3e5} 
uint8\+\_\+t temp = 0}



Holds the most recent temperature reading from the DHT11 sensor (in Â°C). 

