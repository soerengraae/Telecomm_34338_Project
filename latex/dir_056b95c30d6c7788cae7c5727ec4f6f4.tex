\doxysection{Tele-\/website/node\+\_\+modules/@react-\/spring/rafz Directory Reference}
\hypertarget{dir_056b95c30d6c7788cae7c5727ec4f6f4}{}\label{dir_056b95c30d6c7788cae7c5727ec4f6f4}\index{Tele-\/website/node\_modules/"@react-\/spring/rafz Directory Reference@{Tele-\/website/node\_modules/"@react-\/spring/rafz Directory Reference}}


\doxysubsection{Detailed Description}
Coordinate {\ttfamily request\+Animation\+Frame} calls across your app and/or libraries.


\begin{DoxyItemize}
\item \texorpdfstring{$<$}{<} 700 bytes min+gzip
\item Timeout support
\item Batching support (eg\+: {\ttfamily React\+DOM.\+unstable\+\_\+batched\+Updates})
\item Uncaught errors are isolated
\item Runs continuously (to reduce frame skips)
\end{DoxyItemize}

~\hypertarget{README.md_autotoc_md3057}{}\doxysubsection{\texorpdfstring{API}{API}}\label{README.md_autotoc_md3057}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ raf\ \}\ from\ '@react-\/spring/rafz'}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Schedule\ an\ update}
\DoxyCodeLine{raf(dt\ =>\ \{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Start\ an\ update\ loop}
\DoxyCodeLine{raf(dt\ =>\ true)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Cancel\ an\ update}
\DoxyCodeLine{raf.cancel(fn)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Schedule\ a\ mutation}
\DoxyCodeLine{raf.write(()\ =>\ \{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Before\ any\ updates}
\DoxyCodeLine{raf.onStart(()\ =>\ \{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Before\ any\ mutations}
\DoxyCodeLine{raf.onFrame(()\ =>\ \{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ After\ any\ mutations}
\DoxyCodeLine{raf.onFinish(()\ =>\ \{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Set\ a\ timeout\ that\ runs\ on\ nearest\ frame}
\DoxyCodeLine{raf.setTimeout(()\ =>\ \{\},\ 1000)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Use\ a\ polyfill}
\DoxyCodeLine{raf.use(require('@essentials/raf').raf)}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Get\ the\ current\ time}
\DoxyCodeLine{raf.now()\ //\ =>\ number}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Set\ how\ you\ want\ to\ control\ raf\ firing}
\DoxyCodeLine{raf.frameLoop\ =\ 'demand'\ |\ 'always'}

\end{DoxyCode}


~\hypertarget{README.md_autotoc_md3058}{}\doxysubsection{\texorpdfstring{Notes}{Notes}}\label{README.md_autotoc_md3058}

\begin{DoxyItemize}
\item Functions can only be scheduled once per queue per frame.
\item Thus, trying to schedule a function twice is a no-\/op.
\item The {\ttfamily update} phase is for updating JS state (eg\+: advancing an animation).
\item The {\ttfamily write} phase is for updating native state (eg\+: mutating the DOM).
\item \href{https://gist.github.com/paulirish/5d52fb081b3570c81e3a}{\texttt{ Reading}} is allowed any time before the {\ttfamily write} phase.
\item Writing is allowed any time after the {\ttfamily on\+Frame} phase.
\item Timeout handlers run first on each frame.
\item Any handler (except timeouts) can return {\ttfamily true} to run again next frame.
\item The {\ttfamily raf.\+cancel} function only works with {\ttfamily raf} handlers.
\item Use {\ttfamily raf.\+sync} to disable scheduling in its callback.
\item Override {\ttfamily raf.\+batched\+Updates} to avoid excessive re-\/rendering in React.
\end{DoxyItemize}

~\hypertarget{README.md_autotoc_md3059}{}\doxysubsection{\texorpdfstring{{\ttfamily raf.\+throttle}}{{\ttfamily raf.\+throttle}}}\label{README.md_autotoc_md3059}
Wrap a function to limit its execution to once per frame. If called more than once in a single frame, the last arguments are used.


\begin{DoxyCode}{0}
\DoxyCodeLine{let\ log\ =\ raf.throttle(console.log)}
\DoxyCodeLine{}
\DoxyCodeLine{log(1)}
\DoxyCodeLine{log(2)\ //\ nothing\ logged\ yet}
\DoxyCodeLine{}
\DoxyCodeLine{raf.onStart(()\ =>\ \{}
\DoxyCodeLine{\ \ //\ "{}2"{}\ is\ logged\ by\ now}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Cancel\ a\ pending\ call.}
\DoxyCodeLine{log.cancel()}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Access\ the\ wrapped\ function.}
\DoxyCodeLine{log.handler}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md3060}{}\doxysubsection{\texorpdfstring{Prior art}{Prior art}}\label{README.md_autotoc_md3060}

\begin{DoxyItemize}
\item \href{https://github.com/wilsonpage/fastdom}{\texttt{ fastdom}}
\item \href{https://github.com/Popmotion/popmotion/tree/master/packages/framesync}{\texttt{ framesync}} 
\end{DoxyItemize}